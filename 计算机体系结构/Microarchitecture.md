![[Pasted image 20231211121334.png]]
**ISA（指令集架构）**：
指令集架构（Instruction Set Architecture）是计算机架构的一部分，定义了处理器可以执行的指令集，包括指令的格式、指令的字节编码、寄存器、操作模式、以及内存访问方法等。ISA是软件和硬件之间的接口，它告诉程序员处理器能理解和执行哪些指令。

ISA是编程模型的一部分，它确定了编译器和操作系统需要支持的功能。它是在软件层面和硬件层面之间的抽象，使得软件开发者无需关心底层的硬件实现细节。

**微架构（Microarchitecture）**：
微架构是指在给定的指令集架构下，处理器的具体实现方式。微架构涉及到处理器内部的逻辑结构和物理结构，如电路设计、数据路径、缓存组织、执行单元和管道结构等。不同的微架构可以实现同一ISA，而性能和能效等特性可以因不同的微架构设计而有显著差异。

微架构的设计是计算机工程师的任务，他们需要在给定的技术和制造条件下，对性能、功耗、面积和成本等因素进行权衡。一个ISA可能有多个不同的微架构实现，例如Intel和AMD都有实现x86 ISA的微架构，但它们的内部设计有所不同。

总之，**ISA定义了“什么”指令被执行，而微架构定义了“如何”执行这些指令。** ISA为软件提供了一个与硬件实现细节无关的稳定的编程目标，而微架构的设计优化决定了处理器的实际性能和效率。
## 实现
![[Pasted image 20231211134849.png]]
![[Pasted image 20231211134554.png]]
![[Pasted image 20231211135602.png]]
这张图片上的文字描述了指令处理在计算机系统中的一个视角，特别是关于数据路径（Datapath）和控制逻辑（Control Logic）的组成部分。

### 数据路径（Datapath）

数据路径由处理和转换数据信号的硬件元素组成，具体包括：

- **功能单元**：执行实际数据操作的部分，比如算术逻辑单元（ALU），负责执行加法、减法、逻辑运算等。
- **硬件结构**：包括连接功能单元和寄存器的电线和多路选择器（muxes），这些结构使数据能够在不同的硬件部件之间流动。
- **存储单元**：存储数据的地方，例如寄存器，它们用来临时保持数据和指令。

### 控制逻辑（Control Logic）

控制逻辑由产生控制信号的硬件元素组成，控制信号决定了数据路径元素应该如何对数据执行操作。换句话说，控制逻辑指导数据路径中的数据流和操作。

### 指令处理的概述

- 指令将一种数据形式（AS）转换为另一种形式（AS'）。
- 这种转换是通过功能单元完成的，而这些功能单元需要被告知如何对数据进行操作，这是通过控制逻辑来实现的。

简而言之，图片上的文字说明了计算机如何执行指令，即通过数据路径和控制逻辑的相互作用来实现。数据路径负责数据的物理传输和转换，而控制逻辑负责确定数据路径上的操作。这种划分允许复杂的操作在硬件层面上高效地执行。
![[Pasted image 20231211135635.png]]
![[Pasted image 20231211135734.png]]
## 开销计算
![[Pasted image 20231211140059.png]]

## 具体实现
![[Pasted image 20231211141100.png]]
![[Pasted image 20231211141435.png]]
以add指令为例
![[Pasted image 20231211145648.png]]
总体来说就是通过mux来进行处理方式的选择
![[Pasted image 20231211150059.png]]
对Rtype的改进，使之兼容IType
![[Pasted image 20231211151316.png]]
再加入LW与SW指令，两者都是I类型指令，并且利用ALU中的加法指令实现基址+offset寻址
![[Pasted image 20231211152407.png]]
添加mux可以让这个机子重新获得add功能
![[Pasted image 20231211154158.png]]
实现跳转指令
![[Pasted image 20231211160403.png]]
实现条件控制指令，其中PCSrc由ALU中的分支控制逻辑决定
![[Pasted image 20231211161645.png]]
![[Pasted image 20231211162654.png]]
## 控制信号
![[Pasted image 20231212100332.png]]

![[Pasted image 20231212100509.png]]

![[Pasted image 20231212100554.png]]

![[Pasted image 20231212100838.png]]
![[Pasted image 20231212101959.png]]

![[Pasted image 20231212102127.png]]

![[Pasted image 20231212102254.png]]

![[Pasted image 20231212102414.png]]

![[Pasted image 20231212102540.png]]


![[Pasted image 20231212102558.png]]

![[Pasted image 20231212102822.png]]

## 另一种实现方法
![[Pasted image 20231212103509.png]]